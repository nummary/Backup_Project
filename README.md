### Документация к коду программы резервного копирования с использованием MEGA и шифрования

**Описание программы**:  
Это приложение для резервного копирования, которое позволяет пользователям выбрать файл, зашифровать его, загрузить в облачное хранилище MEGA, а также восстановить файл из MEGA. Программа поддерживает шифрование с использованием библиотеки `cryptography.fernet`, работу с API MEGA, а также автоматизацию процесса резервного копирования через заданный интервал.

---

#### 1. **Глобальные переменные**
- `backup_process_active`: Флаг, указывающий на активность процесса резервного копирования.
- `current_file`: Путь к выбранному файлу для резервного копирования.
- `mega`: Объект для взаимодействия с API MEGA.
- `mega_session`: Сессия авторизации MEGA.
- `key_file`: Путь к файлу с ключом для шифрования.
- `backup_interval_minutes`: Интервал в минутах между резервными копиями.

---

#### 2. **Функции**

##### 2.1 **load_or_generate_key()**
Загружает существующий ключ шифрования из файла или генерирует новый и сохраняет его. Используется для создания объекта `Fernet` для шифрования и дешифрования файлов.

**Возвращаемое значение**: Объект `Fernet` для шифрования.

##### 2.2 **encrypt_file(file_path)**
Шифрует файл по указанному пути и сохраняет зашифрованную версию с расширением `.enc`.

**Параметры**:
- `file_path`: Путь к исходному файлу.

**Возвращаемое значение**: Путь к зашифрованному файлу.

##### 2.3 **decrypt_file(encrypted_path, save_path)**
Дешифрует зашифрованный файл и сохраняет его по указанному пути.

**Параметры**:
- `encrypted_path`: Путь к зашифрованному файлу.
- `save_path`: Путь для сохранения дешифрованного файла.

##### 2.4 **mega_login()**
Авторизует пользователя в MEGA с помощью введенных данных (email и пароль).

**Возвращаемое значение**: None

##### 2.5 **choose_file()**
Открывает диалоговое окно для выбора файла для резервного копирования.

**Возвращаемое значение**: None

##### 2.6 **start_backup()**
Запускает процесс резервного копирования, который включает в себя шифрование выбранного файла, загрузку его в MEGA и удаление исходных файлов.

**Возвращаемое значение**: None

##### 2.7 **stop_backup()**
Останавливает процесс резервного копирования, если он был активен.

**Возвращаемое значение**: None

##### 2.8 **restore_file()**
Позволяет пользователю восстановить файл из облачного хранилища MEGA, выбрав его из списка доступных файлов и указав папку для сохранения.

**Возвращаемое значение**: None

##### 2.9 **update_time_label(remaining_time)**
Обновляет метку времени, показывающую оставшееся время до следующего резервного копирования.

**Параметры**:
- `remaining_time`: Оставшееся время в секундах.

**Возвращаемое значение**: None

##### 2.10 **update_backup_interval(event)**
Изменяет интервал резервного копирования в зависимости от выбора пользователя (1, 3 или 5 минут).

**Параметры**:
- `event`: Событие, вызвавшее изменение интервала.

**Возвращаемое значение**: None

---

#### 3. **GUI компоненты**

1. **Окно авторизации**: Запрашивает email и пароль для входа в MEGA.
2. **Выбор файла**: Кнопка для выбора файла для резервного копирования.
3. **Выбор интервала резервного копирования**: Выпадающий список с возможными интервалами (1 минута, 3 минуты, 5 минут).
4. **Кнопки управления**: Кнопки для запуска и остановки резервного копирования, а также для восстановления файла.
5. **Метка времени**: Отображает оставшееся время до следующего резервного копирования.
6. **Лог**: Текстовое поле для отображения статуса операций, ошибок и информации о процессе резервного копирования.

---

#### 4. **Работа с потоками**
- **Резервное копирование** выполняется в отдельном потоке, чтобы не блокировать основной интерфейс программы.
- Восстановление файлов из MEGA также выполняется в отдельном потоке для того, чтобы не зависить от действий пользователя.

---

#### 5. **Зависимости**
Для работы программы необходимы следующие библиотеки:
- `tkinter`: Для создания графического интерфейса.
- `mega`: Для взаимодействия с облачным хранилищем MEGA.
- `cryptography`: Для шифрования и дешифрования файлов.
- `threading`: Для многозадачности и работы с потоками.
- `os`, `time`: Для работы с операционной системой и временными метками.

---

#### 6. **Примечания**
- Перед запуском резервного копирования требуется авторизация в MEGA.
- Все файлы, загружаемые в MEGA, шифруются с помощью библиотеки `cryptography.fernet` для обеспечения безопасности данных.
- После загрузки зашифрованных файлов они удаляются с локального диска для освобождения места.
После установки всех библиотек, необходимо перейти по пути C:\Users\USER\AppData\Local\Programs\Python\PythonXXX\Lib\site-packages\tenacity\_asyncio.py
Заменить @asyncio.coroutine на async def
Заменить return do на yield do
Заменить yield from на yield в двух местах
